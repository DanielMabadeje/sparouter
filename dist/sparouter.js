"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Router=function(){function e(){return _classCallCheck(this,e),this.routes=[],this.requestPath=window.location.pathname,this}return _createClass(e,[{key:"init",value:function(){var t=this;if(this._routeMatched=!1,this.routes.some(function(e){if(t.requestPath.match(e.regEx+"$"))return t._routeMatched=!0,e.params=t._getParameterValue(e.regEx,e.params),e.callback(t,e.params,e.pattern)},this),!this._routeMatched)return this._notFoundFunc?this._notFoundFunc():void 0}},{key:"get",value:function(r,e){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if("function"!=typeof e)throw new Error("typeof parameter 2 must be a callback function");r=(r=""===r?"/":r).toLowerCase(),this.routes.forEach(function(e){if(e.pattern===r)throw new Error("Cannot have two route patterns. Route pattern "+r+" already exists")}),t&&this.routes.forEach(function(e){if(e.name===t)throw new Error("Duplicate naming. A route with name "+t+" already exists")});var n=r,a={};return"string"==typeof r&&this._getParameters(r,function(e,t){a=e,r=t}),this.routes.push({name:t,pattern:n,regEx:r,callback:e,params:a}),this}},{key:"redirect",value:function(r,e){if(r=r.toLowerCase(),e=e.toLowerCase(),r===e)throw new Error("Redirect loop found as both urls are the same");return"string"==typeof r&&this._getParameters(r,function(e,t){r=t}),this.requestPath.match(r+"$")?window.location.href=e:this}},{key:"pathFor",value:function(a){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=void 0,u=!1;if(this.routes.some(function(e){if(e.name!==a);else{if(u=!0,i=e.pattern,0===e.params.length||0===Object.getOwnPropertyNames(e.params).length)return i;var t=Object.getOwnPropertyNames(e.params),r=Object.getOwnPropertyNames(o);if(r.length!==t.length)throw new Error("The route pattern "+e.pattern+" requires "+t.length+" parameter(s). "+r.length+" found");for(var n in o){if(!e.params.hasOwnProperty(n))throw new Error("Invalid route parameter ("+n+") found in the given parameters");i=i.replace("{"+n+"}",o[n])}}}),!u)throw new Error("Invalid route name ("+a+")");return i}},{key:"notFound",value:function(){if(this._notFoundFunc)return this._notFoundFunc();throw new Error("notFoundHandler is not set. Use Router.setNotFoundHandler() method to set it.")}},{key:"notFoundHandler",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return this._notFoundFunc=e,this}},{key:"_getParameters",value:function(e,t){var r=[];if(-1<(e.indexOf("{")&&e.indexOf("}")))for(var n=0,a=0,o=0,i=0;n<=e.length;){a=e.indexOf("{",n),o=e.indexOf("}",n+i);var u=e.substring(a+1,o);r.push(u),n+=o,i=1}return t(r,e.replace(/\{{1}\w*\}{1}/gi,"(.+)"))}},{key:"_getParameterValue",value:function(e,r){var n=[],a={},t=this.requestPath.match(e+"$");return t&&t.forEach(function(e,t){0!==t&&n.push(_defineProperty({},r[t-1],e))}),n.forEach(function(e){for(var t in e)a[t]=e[t]}),a}}]),e}();Router=new Router,exports.default=Router;
//# sourceMappingURL=sparouter.js.map
