!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SPARouter=t():e.SPARouter=t()}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"isString",value:function(e){return"[object String]"===Object.prototype.toString.call(e)}},{key:"isNumber",value:function(e){return"[object Number]"===Object.prototype.toString.call(e)}},{key:"isRegExp",value:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}},{key:"isArray",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{key:"isObject",value:function(e){return"[object Object]"===Object.prototype.toString.call(e)}},{key:"isFunction",value:function(e){return"[object Function]"===Object.prototype.toString.call(e)}},{key:"isBoolean",value:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)}},{key:"isNull",value:function(e){return"[object Null]"===Object.prototype.toString.call(e)}},{key:"isUndefined",value:function(e){return"[object Undefined]"===Object.prototype.toString.call(e)}},{key:"isEmpty",value:function(e){return this.isUndefined(e)||this.isNull(e)||0===e||!1===e||(this.isString(e)||this.isArray(e))&&0===e.length||this.isObject(e)&&0===Object.getOwnPropertyNames(e).length}},{key:"isSet",value:function(e){return!this.isUndefined(e)&&!this.isNull(e)}}])&&o(t.prototype,r),n&&o(t,n),e}();function a(e){var t=i.isSet(e)?"".concat(e," argument is required. None found"):"Required argument was not found",r=new Error(t);return r.name="ArgumentNotFoundError",r.message=t,r.toString=function(){return instace.message},Object.setPrototypeOf(r,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(r,a),r}function u(e,t,r){t=i.isSet(t)?t.toString():n(t);var o=i.isSet(e)?"typeof ".concat(e.toString()," argument must be equal to ").concat(t,". ").concat(n(r)," found."):"Invalid argument type found",a=new Error(o);return a.name="ArgumentTypeError",a.message=o,a.toString=function(){return this.message},Object.setPrototypeOf(a,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(a,u),a}i=new i,a.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),u.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?(Object.setPrototypeOf(a,Error),Object.setPrototypeOf(u,Error)):(a.__proto__=Error,u.__proto__=Error);var c=i;function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.routes=[],this.path=this._requestPath();var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){s(e,t,r[t])})}return e}({},{caseInsensitive:!0,historyMode:!1},t);for(var n in r)this["_".concat(n)]=r[n];return this._checkHistoryMode(),this}var t,r,n;return t=e,(r=[{key:"get",value:function(t,r,n){if(!c.isSet(t))throw new a("uri");if(!c.isSet(r))throw new a("callback");if(!c.isString(t))throw new u("uri","string",t);if(!c.isFunction(r))throw new u("callback","function",r);var o={uri:null,callback:null,thisArg:n=n instanceof e?void 0:n,parameters:null,regExp:null,name:null,current:!1};return this._caseInsensitive&&(t=t.toLowerCase()),t=t.startsWith("/")?t:"/".concat(t),this.routes.forEach(function(e){if(e.uri===t)throw new Error("Conflicting routes. The route uri ".concat(e.uri," already exists"))}),o.uri=t,o.callback=r,o.parameters=this._proccessParameters(o.uri),this.routes.push(o),this}},{key:"where",value:function(e,t){if(!c.isSet(e))throw new a("name");if(!c.isSet(t))throw new a("regExp");if(!c.isString(e))throw new u("name","string",e);if(!c.isString(t))throw new u("regExp","string",t);var r=this.routes[this.routes.length-1];if(0===r.parameters.length)throw new Error("No Parameters Found: Could not set paramater regExpression for [".concat(r.uri,"] because the route has no parameters"));t=(t=t.replace(/\(/g,"\\(")).replace(/\)/g,"\\)"),t="(".concat(t,"+)");var n=!1;if(r.parameters.forEach(function(r,o){void 0!==r[e]&&(n=!0,r[e].regExp=t)}),!n)throw new Error("Invalid Parameter: Could not set paramater regExpression for [".concat(r.uri,"] because the parameter [").concat(e,"] does not exist"));return this}},{key:"setName",value:function(e){if(!c.isSet(e))throw new a("name");if(!c.isString(e))throw new u("name","string",e);var t=this.routes[this.routes.length-1];return this.routes.forEach(function(t){if(t.name===e)throw new Error("Duplicate naming. A route with name ".concat(e," already exists"))}),t.name=e,this}},{key:"init",value:function(){var e=this;this.routes.forEach(function(t){e._proccessRegExp(t)},this);var t=!1,r={pathFor:function(t,r){return e._pathFor(t,r)},goTo:function(t,r,n){return e._goTo(t,r,n)},historyMode:this._historyMode};if(this.routes.some(function(n){if(e._requestPath().match(n.regExp)){n.current=!0,t=!0;var o={};return o.param=e._processRequestParameters(n),o.uri=window.location.pathname,n.callback.call(n.thisArg,o,r)}},this),!t){if(!this._notFoundFunction)return;var n={};return n.uri=window.location.pathname,this._notFoundFunction(n,r)}}},{key:"notFoundHandler",value:function(e){if(!c.isSet(e))throw new a("callback");if(!c.isFunction(e))throw new u("callback","function",e);return this._notFoundFunction=e,this}},{key:"redirect",value:function(e,t){return this}},{key:"group",value:function(){}},{key:"_goTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!c.isSet(e))throw new a("url");if(!c.isString(e))throw new u("url","string",e);if(c.isEmpty(e))throw new TypeError("url cannot be empty");return this._historyMode?(window.history.pushState(t,r,e),this.init()):(window.localStorage.setItem("pushState",t),window.location.href=e)}},{key:"_pathFor",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!c.isSet(e))throw new a("name");if(!c.isString(e))throw new u("name","string",string);if(c.isEmpty(e))throw new TypeError("name cannot be empty");var n,o=!1;if(this.routes.some(function(i){if(i.name===e&&(o=!0,n=i.uri,t._containsParameter(n))){if(!c.isSet(paramaters))throw new a("parameters");if(!c.isObject(r))throw new u("parameters","object",r);if(c.isEmpty(r))throw new TypeError("parameters cannot be empty");var s=[],l=!0,f=!1,p=void 0;try{for(var h,y=i.uri.match(/\{(\w+)\}/g)[Symbol.iterator]();!(l=(h=y.next()).done);l=!0){var g=h.value;g=(g=g.replace("{","")).replace("}",""),s.push(g)}}catch(e){f=!0,p=e}finally{try{l||null==y.return||y.return()}finally{if(f)throw p}}if(s.length!==Object.getOwnPropertyNames(r).length)throw new Error("The route with name [".concat(e,"] contains ").concat(s.length," parameters. ").concat(Object.getOwnPropertyNames(r).length," given"));for(var w in r){if(!s.includes(w))throw new Error("Invalid parameter name [".concat(w,"]"));var m=new RegExp("{".concat(w,"}"),"g");n=n.replace(m,r[w])}}}),!o)throw new Error("Invalid route name [".concat(e,"]"));return n}},{key:"_proccessParameters",value:function(e){var t=[],r=0;return this._containsParameter(e)&&e.replace(/\{\w+\}/g,function(e){r++,e.replace(/\w+/,function(e){var n={};n[e]={sn:r,regExp:"(\\w+)",value:null},t.push(n)})}),t}},{key:"_proccessRegExp",value:function(e){var t=e.uri;return t=(t=(t=t.replace(/\//g,"\\/")).replace(/\./g,"\\.")).replace("/","/?"),this._containsParameter(e.uri)&&t.replace(/{\w+}/g,function(r){var n=r.replace("{","");return n=n.replace("}",""),e.parameters.some(function(e){if(void 0!==e[n])return t=t.replace(r,e[n].regExp)}),r}),t="^".concat(t,"$"),e.regExp=new RegExp(t),e}},{key:"_containsParameter",value:function(e){return e.search(/{\w+}/g)>=0}},{key:"_processRequestParameters",value:function(e){var t=this._requestPath().match(e.regExp);if(t){var r={};return t.forEach(function(t,n){if(0!==n){var o=Object.getOwnPropertyNames(e.parameters[n-1]);r[o]=t}}),r}}},{key:"_requestPath",value:function(){return window.location.pathname}},{key:"_checkHistoryMode",value:function(){var e=this;if(this._historyMode&&(window.PopStateEvent||!(!1 in history)))return window.addEventListener("popstate",function(t){e.init()}),this}}])&&l(t.prototype,r),n&&l(t,n),e}();t.default=f}]).default});